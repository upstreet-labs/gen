<!doctype html>
<html>

<head>
<!-- <title>Engine Backend</title> -->
</head>

<body>
  <!-- <div id=iframe-container></div>
  <div id="root"></div>
  <canvas id="canvas"></canvas> -->
<script type=module>
import offscreenEngineApi from '../packages/offscreen-engine-runtime/offscreen-engine-runtime.js';
import {
  compileVirtualScene,
} from '../src/generators/scene-generator.js';

offscreenEngineApi(async (funcName, args, opts) => {
  if (funcName === 'compileScene') {
    const {imageArrayBuffer} = args;
    const result = await compileVirtualScene(imageArrayBuffer);
    return result;
  } else {
    throw new Error('unknown function: ' + funcName);
  }
});
</script>
</body>

</html>
